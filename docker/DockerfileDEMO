ARG IMAGE=ubuntu:20.04
FROM ${IMAGE}

ARG php_var="7.4"
ARG user_var="root"

SHELL ["/bin/bash", "-c"]

RUN DEBIAN_FRONTEND=noninteractive apt-get update
RUN DEBIAN_FRONTEND=noninteractive apt-get install -y \
    tzdata \
    git \
    bash-completion \
    php$php_var \
    php$php_var-curl \
    php$php_var-dom \
    php$php_var-mbstring \
    php$php_var-bcmath \
    python3 \
    python3-pandas \
    python3-xlsxwriter \
    python3-netaddr \
    python3-requests

RUN DEBIAN_FRONTEND=noninteractive apt-get install -y jq

WORKDIR /demo/pan-os-php

COPY . .


# Entrypoint script
WORKDIR /scripts
COPY docker/entrypoint.sh .

# Working dir for the app
VOLUME /share
WORKDIR /share

ENTRYPOINT [ "/bin/bash", "/scripts/entrypoint.sh" ]
